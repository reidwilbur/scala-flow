apply plugin: 'scala'
apply plugin: 'eclipse'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.scala-lang:scala-library:2.9.3'
    compile 'com.weiglewilczek.slf4s:slf4s_2.9.1:1.0.7'

    testCompile 'org.scalatest:scalatest_2.9.3:1.9.1'
    testCompile 'org.slf4j:slf4j-simple:1.7.5' 
}

task test(overwrite: true, dependsOn: testClasses) << {
    ant.taskdef(
        name: 'scalatest',
        classname: 'org.scalatest.tools.ScalaTestAntTask',
        classpath: sourceSets.test.runtimeClasspath.asPath
    )

    def args = [
        runpath: sourceSets.test.output.classesDir,
        haltonfailure: 'true',
        fork: 'false'
    ]
    if (project.properties['testsuite'] != null) {
      args['suite'] = project.properties['testsuite']
    }

    ant.scalatest(args) 
    {
      reporter(type: 'stderr')
    }
}

